<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>项目管理系统</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-tasks"></i> 项目管理系统</h1>
            <div class="header-actions">
                <button id="addPersonBtn" class="btn btn-primary">
                    <i class="fas fa-user-plus"></i> 添加人员
                </button>
            </div>
        </header>

        <nav class="nav-tabs">
            <button class="nav-tab active" data-tab="personnel">人员管理</button>
            <button class="nav-tab" data-tab="tasks">功能需求表</button>
            <button class="nav-tab" data-tab="gantt">甘特图</button>
            <button class="nav-tab" data-tab="logs">操作日志</button>
        </nav>

        <main class="main-content">
            <!-- 人员管理页面 -->
            <div id="personnel" class="tab-content active">
                <div class="section-header">
                    <h2><i class="fas fa-users"></i> 人员管理</h2>
                </div>
                <div class="personnel-grid" id="personnelGrid">
                    <!-- 人员卡片将动态生成 -->
                </div>
            </div>

            <!-- 功能需求表页面 -->
            <div id="tasks" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-list-alt"></i> 功能需求表</h2>
                    <div class="header-actions">
                        <button id="toggleAllBtn" class="btn btn-secondary">
                            <i class="fas fa-compress-alt"></i> 全部折叠
                        </button>
                        <button id="addTaskBtn" class="btn btn-primary">
                            <i class="fas fa-plus"></i> 新建功能/任务
                        </button>
                    </div>
                </div>
                <div class="tasks-container" id="tasksContainer">
                    <!-- 任务树将动态生成 -->
                </div>
            </div>

            <!-- 甘特图页面 -->
            <div id="gantt" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-chart-gantt"></i> 甘特图</h2>
                    <div class="info-text">
                        <small><i class="fas fa-info-circle"></i> 仅显示未完成的已分配任务</small>
                    </div>
                </div>
                <div class="gantt-container" id="ganttContainer">
                    <!-- 甘特图将动态生成 -->
                </div>
            </div>

            <!-- 操作日志页面 -->
            <div id="logs" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-history"></i> 操作日志</h2>
                </div>
                <div class="logs-container" id="logsContainer">
                    <!-- 日志将动态生成 -->
                </div>
            </div>
        </main>
    </div>

    <!-- 模态框 -->
    <!-- 添加人员模态框 -->
    <div id="addPersonModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>添加人员</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="addPersonForm">
                    <div class="form-group">
                        <label for="personName">姓名：</label>
                        <input type="text" id="personName" name="personName" required>
                    </div>
                    <div class="form-group">
                        <label for="personRole">角色：</label>
                        <select id="personRole" name="personRole" required>
                            <option value="">请选择角色</option>
                            <option value="项目经理">项目经理</option>
                            <option value="开发工程师">开发工程师</option>
                            <option value="测试工程师">测试工程师</option>
                            <option value="UI设计师">UI设计师</option>
                            <option value="产品经理">产品经理</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="personEmail">邮箱：</label>
                        <input type="email" id="personEmail" name="personEmail">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelAddPerson">取消</button>
                <button type="submit" form="addPersonForm" class="btn btn-primary">添加</button>
            </div>
        </div>
    </div>

    <!-- 添加任务模态框 -->
    <div id="addTaskModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>新建功能/任务</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="addTaskForm">
                    <div class="form-group">
                        <label for="taskName">任务名称：</label>
                        <input type="text" id="taskName" name="taskName" required>
                    </div>
                    <div class="form-group">
                        <label for="taskDescription">任务描述：</label>
                        <textarea id="taskDescription" name="taskDescription" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="taskLevel">任务级别：</label>
                        <select id="taskLevel" name="taskLevel" required>
                            <option value="1">一级功能</option>
                            <option value="2">二级功能</option>
                            <option value="3">三级功能</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="parentTask">上级任务：</label>
                        <select id="parentTask" name="parentTask">
                            <option value="">无（一级任务）</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="taskPriority">优先级：</label>
                        <select id="taskPriority" name="taskPriority" required>
                            <option value="高">高</option>
                            <option value="中">中</option>
                            <option value="低">低</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="estimatedHours">预计工时（小时）：</label>
                        <input type="number" id="estimatedHours" name="estimatedHours" min="1">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelAddTask">取消</button>
                <button type="submit" form="addTaskForm" class="btn btn-primary">创建</button>
            </div>
        </div>
    </div>

    <!-- 任务分配模态框 -->
    <div id="assignTaskModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>分配任务</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="assignTaskForm">
                    <div class="form-group">
                        <label for="assignPerson">分配给：</label>
                        <select id="assignPerson" name="assignPerson" required>
                            <option value="">请选择人员</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="plannedStartDate">计划开始时间：</label>
                        <input type="datetime-local" id="plannedStartDate" name="plannedStartDate" required>
                    </div>
                    <div class="form-group">
                        <label for="plannedEndDate">计划结束时间：</label>
                        <input type="datetime-local" id="plannedEndDate" name="plannedEndDate" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelAssignTask">取消</button>
                <button type="submit" form="assignTaskForm" class="btn btn-primary">分配</button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>